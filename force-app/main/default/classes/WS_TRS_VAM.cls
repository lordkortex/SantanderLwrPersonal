global class WS_TRS_VAM {
    global static String baseEndpoint;
    global static String baseMethod;
    global static String tokenPlatform;
    global static String tokenUser;

    global static String queryParams;
    global static String finalEndpoint;

    global static WS_TRS_VAM.OUTPUT execute (WS_TRS_VAM.INPUT input, String operation) {
        OUTPUT res = null; 
        CNT_ApiConfiguration__c configWs = new CNT_ApiConfiguration__c();
        configWs = CNT_ApiConfiguration__c.getValues('WS_TRS_VAM' + operation);
        baseEndpoint = configWs.CNT_Endpoint__c;
        baseMethod = configWs.CNT_HTTPMethod__c;
        tokenPlatform = configWs.tokenPlatform__c;
        tokenUser = configWs.tokenUser__c;
        try {
            queryParams = '';
            finalEndpoint = '';
            getParameters('bankId', input.bankId);
            getParameters('country', input.country);
            getParameters('vamAccount', input.vamAccount);
            if (String.isNotBlank(queryParams)) {
                finalEndpoint = baseEndpoint + '?' + queryParams;
            }
            Map<String,String> extraHeaders = new Map<String,String>();
            //extraHeaders.put('Global-Payment-Id', paymentId);
            //String response = Global_IntegrationWrapper.launchHTTP(null, finalEndPoint, baseMethod, extraHeaders);
            String response = '{   "virtualAccountData":  {     "vamAccount": "00000000", "vamName": "Cuenta", "balance":{"amount": "1000", "tcurrency": "EUR"},"status": "OK", "tlimit":{ "limitMax":{"amount": "900", "tcurrency": "EUR"}, "limitMin":{"amount": "300", "tcurrency": "EUR"}}, "linkedAccountDataDetails":{"country":"ES","entityName":"Santander", "bankId":"test Id","destinationAccountId":"11111111","destinationEntityDetails":{"destinationEntityName":"BBVA", "destinationEntityBic":"BSCHXX"},"liquidityBufferManagementScheme":"Scheme"}}	 }';
            if(operation != 'GetAccount'){
            	 response = '{   "accountsDataList": [    {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },  {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },   {      "entityName": "Hola", "country": "ES",       "bankId": "BMSXMXMMXXX",       "currency": "EUR",       "vamAccount": "VAESEUR",       "liquidityBufferManagementScheme": "Central",       "accountId": "32180000118359700",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX",         "destinationEntityBic": "Banco Santander España"       }     },     {      "entityName": "Adios", "country": "GB",       "bankId": "BMSXMXMMXXX",       "currency": "EUR2",       "vamAccount": "ByeBye",       "liquidityBufferManagementScheme": "Refund",       "accountId": "321800001183597002",       "destinationEntityDetails": {         "destinationEntityName": "BSCHESMMXXX2",         "destinationEntityBic": "Banco Santander España2"       }     }   ] }';
            }
            res = getOutput(response, operation);
        } catch (Exception e) {
            System.debug('WS_TRS_VAM.execute: ' + e.getMessage() + ' in line ' + e.getLineNumber());
            throw new CustomException('WS_TRS_VAM.execute: ' + e.getMessage() + ' in line ' + e.getLineNumber());
        }
        return res;
    }

    private static void getParameters (String fieldName, String field) {
        if (String.isNotBlank(fieldName) && String.isNotBlank(field)) {
            if (String.isNotBlank(queryParams) && queryParams.substring(queryParams.length() - 1, queryParams.length()) != '&') {
                queryParams = queryParams + '&';
            }
            queryParams = queryParams + fieldName + '=' + field;
        }
    }

    global static WS_TRS_VAM.OUTPUT getOutput (String response, String operation) {
        OUTPUT res = new OUTPUT();
        try {
            Switch on operation {
                When 'GetList' {
                    res.AccountsListResponse = (WS_TRS_VAM.AccountsListResponse) JSON.deserialize(response, WS_TRS_VAM.AccountsListResponse.class);
                }
                When 'GetAccount'{
                    res.virtualAccountParent = (WS_TRS_VAM.VirtualAccountParent) JSON.deserialize(response, WS_TRS_VAM.VirtualAccountParent.class);
                }
            }
        } catch (Exception e) {
            System.debug('WS_TRS_VAM.getOutput: ' + e.getMessage() + ' in line ' + e.getLineNumber());
            throw new CustomException('WS_TRS_VAM.getOutput: ' + e.getMessage() + ' in line ' + e.getLineNumber());
        }
        return res;
    }

    global class INPUT {
        global String vamAccount {get;set;}
        global String bankId {get;set;}
        global String country {get;set;}

        global INPUT () {
        }
    }

    global class OUTPUT {
        @AuraEnabled global AccountsListResponse accountsListResponse {get;set;}
        @AuraEnabled global VirtualAccountParent virtualAccountParent {get;set;}
        
        global OUTPUT () {
        }
    }
    
    global class AccountsListResponse {
        @AuraEnabled global List<AccountsData> accountsDataList {get;set;}

        global AccountsListResponse () {
        }        
    }
    
    global class AccountsData {
        @AuraEnabled global LinkedAccountDataDetails linkedAccountDataDetails {get;set;}
        @AuraEnabled global String country {get;set;}
        @AuraEnabled global String entityName {get;set;}
        @AuraEnabled global String bankId {get;set;}
        @AuraEnabled global String icurrency {get;set;}
        @AuraEnabled global String vamAccount {get;set;}
        @AuraEnabled global String liquidityBufferManagementScheme {get;set;}
        @AuraEnabled global String accountId {get;set;}
        @AuraEnabled global String destinationAccountId {get;set;}
        @AuraEnabled global DestinationEntityDetails destinationEntityDetails {get;set;}
        
        global AccountsData () {
        }   
    }
    
    global class LinkedAccountDataDetails {
        @AuraEnabled global String country {get;set;}
        @AuraEnabled global String entityName {get;set;}
        @AuraEnabled global String bankId {get;set;}
        @AuraEnabled global String icurrency {get;set;}
        @AuraEnabled global String vamAccount {get;set;}
        @AuraEnabled global String liquidityBufferManagementScheme {get;set;}
        @AuraEnabled global String accountId {get;set;}
        @AuraEnabled global String destinationAccountId {get;set;}
        @AuraEnabled global DestinationEntityDetails destinationEntityDetails {get;set;}
        
        global LinkedAccountDataDetails () {
        }   
    }
    
    global class DestinationEntityDetails {
        @AuraEnabled global String destinationEntityName {get;set;}
        @AuraEnabled global String destinationEntityBic {get;set;}
        
        global DestinationEntityDetails () {
        }   
    }
    global class VirtualAccountParent {
        @AuraEnabled global VirtualAccountData virtualAccountData {get;set;}
    }

        
    global class VirtualAccountData {
        @AuraEnabled global String vamAccount {get;set;}
        @AuraEnabled global String vamName {get;set;}
        @AuraEnabled global Balance balance {get;set;}
        @AuraEnabled global String status {get;set;}
        @AuraEnabled global iLimit tlimit {get;set;}
        @AuraEnabled global LinkedAccountDataDetails linkedAccountDataDetails {get;set;}
        
        global VirtualAccountData () {
        }   
    }
    
	global class Balance {
        @AuraEnabled global String tcurrency {get;set;}
        @AuraEnabled global Double amount {get;set;}
        
        global Balance () {
        }   
    }
    
    global class iLimit {
        @AuraEnabled global vLimit limitMax {get;set;}
        @AuraEnabled global vLimit limitMin {get;set;}
        
        global iLimit () {
        }  
    }
    global class vLimit {
        @AuraEnabled global String tcurrency {get;set;}
        @AuraEnabled global Double amount {get;set;}
        
        global vLimit () {
        } 
	}
    
}