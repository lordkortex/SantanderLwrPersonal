<template>
    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">
        <div class="slds-modal__container modal_s">  
            <div class="modal-content">
                
                <!-- MODAL HEADER -->
                <header class="slds-modal__header">
                    <button class="slds-button slds-button_icon slds-modal__close"  onclick={closeDownloadModal}>
                        <div class="icon-close_big"></div> 
                        <span class="slds-assistive-text">{Label.close}</span>
                    </button>
                    <div if:false={isotfxcommunity}>
                        <h2 id="modal-heading-01" class="slds-modal__title slds-hyphenate">{Label.DownloadPayments}</h2> 
                    </div>
                    <div if:true={isotfxcommunity}>
                        <h2 id="modal-heading-02" class="slds-modal__title slds-hyphenate">{Label.OTFX_DownloadTrades}</h2> 
                    </div>
                </header>
                
                <!-- MODAL CONTENT -->
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                    <div if:true={condition1}>
                        <div if:true={condition2}>
                            <div if:true={condition3}>
                                <p>{contat}</p>
                            </div>

                            <div if:false={condition3}>
                                <!--You will download [NUMBER] payments according to selected filters.-->
                                <p>{format1}</p>
                            </div>
                            
                        </div>
                        <div if:false={condition2}>
                            <!--You will download [number] payments.  You have reached the maximum number of payments that can be downloaded.-->
                            <p>{format2}</p>
                        </div>
                    </div>         
    				<div if:false={condition1}>
                        <div if:true={condition4}>
                            <!--You will download [NUMBER] payments.-->
                            <p>{format3}</p>                          
                        </div>
                        <div if:false={condition4}>
                            <!--You will download [number] payments.  You have reached the maximum number of payments that can be downloaded.-->
                            <p>{format4}</p>
                        </div>
                    </div>                  
                    <!-- DROPDOWN -->
                    <div class="dropdownContainer">
                        <!-- Cuando salga un error en el input añadir la clase error al siguiente div -->
                        <div class={getclass}>
                            <!-- DROPDOWN MARKUP -->
                            <!-- ESTADO 1: (Hasta que no se selecciona una opción | ENABLE): LA LABEL DEBE ELIMINARSE -->
                            <!-- ESTADO 2: (Se activa | FILLED): LA LABEL DEBE APARECER -->
                            <!-- ESTADO 3: (Se abre | OPEN): LA LABEL DEBE APARECER, EL ICONO pasa a ser icon-arrowUp_small (Se descomenta la línea comentada con  icon-arrowUp_small y se comenta la de icon-arrowDown_small ) -->
                            <!-- ESTADO 4: Opción seleccionada: LA LABEL DEBE APARECER, EL ICONO vuelve a ser icon-arrowDown_small  -->
                            <div if:true={conditionempty}>
                                <label class="slds-form-element__label" for="text-input-id-1">{Label.fileFormat}</label>
                            </div>
                            <div class="slds-combobox slds-dropdown-trigger" aria-expanded="true" aria-haspopup="dialog" role="combobox">
                                <div class="slds-dropdown-trigger slds-dropdown-trigger_click">
                                    
                                    <!-- Cuando el button esté disabled se le añade disabled="true" y la label anterior debe estar oculta -->
                                    <button class="slds-button button-order" aria-haspopup="true">
                                        
                                        <!-- Cuando se seleccione un valor del dropdown hay que cambiar la clase selectedValue-placeholder por
                                        selectedValue-filled -->
                                        <div if:true={conditionempty}>
                                            <div class="slds-border_right selectedValue-filled">{selectedvalue}</div>
                                        </div>
                                        <div if:false={conditionempty}>
                                            <div class="slds-border_right selectedValue-placeholder">{Label.fileFormat}</div>
                                        </div>
                                        
                                        <div class="slds-button__icon arrow" aria-hidden="true">
                                            <div class="button-arrow icon-arrowDown_small"></div>
                                            <!-- Cuando el dropdown está en el ESTADO 3, el icono icon-arrowDown_small cambia por icon-arrowUp_small: -->
                                            <!-- Comentar la línea de código anterior y descomentar la siguiente: -->
                                            <div class="button-arrow icon-arrowUp_small"></div>
                                        </div>
                                        <!--<span class="slds-assistive-text">{helptextdropdown}</span><p>{values}</p>-->
                                        
                                    </button>
                                    
                                    <!-- Añadir en el caso en el que se necesite texto de ayuda-->
                                    <!-- Cuando tenga que aparecer un mensaje de error -->
                                    <div class="errorText">{Label.PAY_selectFileFormat}</div>
                                </div>
                                
                                <!-- Cuando el button esté disabled el dropdown se oculta -->
                                <div class="slds-dropdown slds-dropdown_left dropdownOrder">
                                    <ul class="slds-dropdown__list" role="menu" aria-label={gethelpTextDropdown}>                                   
                                        <template for:each={valuesObj} for:item='item'>                                       
                                            <li class={item.clase} role="presentation" key={item.key} data-value={item.val} onclick={selectOption}>
                                                <a role="menuitemcheckbox" tabindex="0" aria-checked="true">
                                                    <div class="slds-truncate optionOrder">{item.val}</div>
                                                </a>
                                            </li>
                                        </template>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- MODAL FOOTER -->
                    <div class="slds-modal__footer"> 
                        <div class="modal-footer-buttons">
                            <button class="slds-button primary button_small button_full" onclick={handleApply}>{Label.apply}</button> 
                            <button class="slds-button secondary button_small button_full" onclick={handleClearAll}>{Label.clearAll}</button>         
                        </div> 
                    </div>  
                </div>
            </div>
        </div>
        
    </section>
    
    <div class="slds-backdrop slds-backdrop_open"></div>
    
</template>