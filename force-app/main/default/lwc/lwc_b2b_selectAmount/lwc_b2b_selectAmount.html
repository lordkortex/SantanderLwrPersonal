<template>
   <div class={mainClass} data-id="step-3" tabindex="-1">  
        <c-cmp-pay-step-header stepnumber="3" steptitle={label.B2B_Step_3_Header}></c-cmp-pay-step-header>
        <div class="paymentStep_body">
            <div class="amountBalance">
                <c-lwc_b2b_input-amount 
                    data-id="sourceAmountInput"
                    elementlabel={elementlabelsource}
                    numberformat={userdata.numberFormat}
                    acccurrency={paymentdraft.sourceAccount.currencyCodeAvailableBalance}
                    value={paymentdraft.amountSend}
                    inputid="sourceAmountInput"
                    errormsg={errorMSG}
                    handlechange={handleChangeSend}
                    steps={steps}
                    ismodified={ismodified}
                    disablefrom={disablefrom}
                    disableto={disableto}
                    disabled={disablefrom}
                    iscib={userdata.cib}
                    showbalanceinfo={amountabailablebalancenotempty}
                    balancevalue={paymentdraft.sourceAccount.amountAvailableBalance}
                    balancecurrency={paymentdraft.sourceAccount.currencyCodeAvailableBalance}
                    datetext={paymentdraft.sourceAccount.lastUpdateAvailableBalance}
                    timetext={timeSourceBalance}
                    dateformat={userdata.dateFormat}
                    showbothamountinput={showbothamountinput}
                    onchangeinputamount={handleChange}>
                </c-lwc_b2b_input-amount>
             <template if:true={showbothamountinput}>
                <div class="indicativeRate">
                    <template if:true={exchangeRateNotZero}>
                        <template if:true={isCibFalseOrEmpty}>
                            <template if:true={paymentdraftoriginzero}>
                                <div class="slds-text-align_center bold">
                                    <c-lwc_display-amount
                                        amount={exchangeratetoshow}
                                        decimalclass="bold"
                                        wholeclass="bold"
                                        numberofdec="4"
                                        wholedecimal
                                        numberformat={userdata.numberFormat}>
                                    </c-lwc_display-amount>
                                    {rateCurrencies}
                                </div>
								<div class="slds-text-align_center">ratepaymentdrafttimestamp}</div>                                
                           </template>
                            <template if:false={paymentdraftoriginzero}>
                                <div class="slds-text-align_center bold">
                                    <c-lwc_display-amount
                                        amount={exchangeratetoshow}
                                        decimalclass="bold"
                                        wholeclass="bold"
                                        numberofdec="4"
                                        wholedecimal
                                        numberformat={userdata.numberFormat}>
                                    </c-lwc_display-amount>
                                   {ratecurrencies}
                                </div>
                                <div class="slds-text-align_center">{ratepaymentdrafttimestamp}</div>
                            </template>
                        </template>
                    </template>
                    <div class="icon"> <span class="icon-income-expenses"> </span></div>
                 </div>
                 <c-lwc_b2b_input-amount 
                    data-id="recipientAmountInput"
                    elementlabel={elementlabeldestination}                
                    numberformat={userdata.numberFormat}
                    acccurrency={paymentdraft.paymentCurrency}
                    value={paymentdraft.amountReceive}
                    inputid="recipientAmountInput"
                    errormsg=""
                    handlechange={handleChangeReceive}
                    steps={steps}
                    ismodified={ismodified}
                    disablefrom={disablefrom}
                    disableto={disableto}
                    disabled={disableto}
                    iscib={userdata.cib}                    
                    showmoreinfotext
                    moreinfolabel={label.B2B_Country}
                    moreinfovalue={paymentdraft.destinationAccount.countryName}
                    dateformat ={userdata.dateFormat}
                    showbothamountinput ={showbothamountinput}
                    onchangeinputamount={handleChange}>
                 </c-lwc_b2b_input-amount>
                </template>          
            </div>
        <template if:true={productidnonull}>
                <c-lwc_b2b_payment-information
                    data-id="paymentInformation"
                    paymentdraft={paymentdraft}
                    userdata={userData}
                    steps={steps}
                    isediting={isediting}
                    transfertype={transfertype}
                    signlevel={signlevel}
                    step3field={step3field}
                    errorref={errorref}
                    errorpurpose={errorpurpose}
                    errorcharges={errorcharges}
                    errorpaymentreason={errorpaymentreason}
                    charges={charges}              			        
                    paymentpurpose={paymentpurpose}>
                </c-lwc_b2b_payment-information>
                <template if:true={spinner}>
                    <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
                </template>
        
                <template if:true={isStepThreeLastStepModified}>
                    <c-lwc_b2b_process-continue-button
                        onhandlecontinue={handleContinue}>
                    </c-lwc_b2b_process-continue-button>
                </template>        
                <c-lwc_b2b_toast 
                    data-id="errorToast">
                </c-lwc_b2b_toast>
                
        </template>
    </div>
 </div>
</template>