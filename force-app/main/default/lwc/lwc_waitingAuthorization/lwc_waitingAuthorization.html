<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 03-05-2021
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
  Modifications Log 
  Ver   Date         Author                               Modification
  1.0   02-27-2021   ChangeMeIn@UserSettingsUnder.SFDoc   Initial Version
-->
<template>
      
    <div class="authorization_card">

        <article class={cardClass}>
            
            <!-- CARD HEADER -->
            <div class="slds-card__header slds-grid">
                
                <!-- Header que se muestra por defecto -->
                <header class="slds-media slds-has-flexi-truncate">
                    <div class="slds-media__body">
                        
                        <div class="card_icon">
                            <template if:true={error}>
                                <img class="error_icon" src={imageAlert}/>
                            </template>
                            <template if:false={error}>
                                <template if:true={localuser}>
                                    <div class="icon-signature-pending"></div> 
                                </template>
                                <template if:false={localuser}> 
                                    <img class="app_icon" src={imageId}/> 
                                 </template>   
                            </template> 
                        </div>
                        
                        <template if:true={error}>
                            <template if:true={expired}>
                                 <h2 class="slds-card__header-title slds-truncate">{Label.WaitingAuthorizationExpired}</h2>
                            </template>
                            <template if:false={expired}>
                                <template if:true={errorOTP}>
                                    <template if:true={localUser}>
                                 		<h2 class="slds-card__header-title slds-truncate">{Label.apologiesElectronicSignature}</h2>
                                         <span class="card_subtitle">{Label.please}&nbsp;<button class="slds-button button_link" onclick={handleResend}>{Label.WaitingAuthorizationfail2}</button> </span>
                                    </template>
                                    <template if:false={localUser}>
                                        <h2 class="slds-card__header-title slds-truncate">{Label.apologiesSantaderId}</h2>
                                        <span class="card_subtitle">{Label.please}&nbsp;<button class="slds-button button_link" onclick={handleResend}>{Label.WaitingAuthorizationfail2}</button> </span>
                                    </template>
                                </template>
                                <template if:false={errorOTP}>
                                    <h2 class="slds-card__header-title slds-truncate">{Label.WaitingAuthorizationExpired}</h2>
                                    <span class="card_subtitle">{Label.WaitingAuthorizationfail1}&nbsp;<button class="slds-button button_link" onclick={handleResend}>{Label.WaitingAuthorizationfail2}</button> </span>
                                </template>
                            </template>
                        </template>                           
                        <template if:false={error}>
                            <template if:true={localUser}>
                                <h2 class="slds-card__header-title slds-truncate">{Label.waitingForAuthorizationLocalBank}</h2> 
                            </template>
                            <template if:false={localuser}>
                                <h2 class="slds-card__header-title slds-truncate">{Label.WaitingAuthorization1}</h2> 
                                <span class="card_subtitle">{Label.WaitingAuthorization2}&nbsp;<button class="slds-button button_link" onclick={showDownload}>{Label.WaitingAuthorization3}</button> </span>
                            </template>
                        </template> 
                            
                    </div>
                </header>
            </div>
            
            <!-- DIVISION LINE -->        
            <template if:true={showDivisionLine}>
            	<div class="card-line"></div>
            </template>
                        
            <!-- CARD BODY -->
            <!-- añadir la clase error junto a la clase slds-card__body cuando el código introducido sea incorrecto -->
            <!-- añadir la clase expired-code junto a la clase slds-card__body cuando el código haya expirado 
            <div class="slds-card__body">
            </div>-->
            
            <!-- CARD FOOTER -->
            <!-- Footer por defecto. Se ocultará cuando el código haya expirado -->
            <template if:true={footerExpired}>
                <footer class="slds-card__footer">        
                    <button class="slds-button button_link" onclick={handleResend}>{Label.WaitingAuthorizationResend}<span class="icon_right icon-reload"></span></button>
                </footer>
            </template>
            <template if:true={spinnerEqualsTrue}>
                <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
            </template>
            
        </article>
    </div>
    
    <!-- CARD BODY -->
    <div class="slds-card__body">
    </div>

     <!-- Enlace de contacto que se mostrará a la vez que la card de autorización -->
    <div class="contact">
        <div class="contentCard"> 
            <article class="slds-card cardProcessExit">
                <div class="slds-card__header">
                    <span class="slds-text-heading_small">{Label.WaitingAuthorizationResendHelp1}<button class="slds-button button_link" onclick={goToSupport}>{Label.WaitingAuthorizationResendHelp2}<span class="icon icon-phone-support icon_right"></span></button></span>
                </div>  
            </article>
        </div>
    </div>
    
    <template if:true={isShowDownload}>
        <c-lwc_downloadx show={showDownloadInitial}  onhidemodal={setShowDownload} ></c-lwc_downloadx>
    </template>

</template>